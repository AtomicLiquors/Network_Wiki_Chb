[<<메인으로](https://github.com/AtomicLiquors/Network_Wiki_Chb)

&nbsp;  
&nbsp;  

"네트워크 구성은 통신이 가능하다고 해서 끝나는 것이 아닙니다.  
디자인과 구성에 따라 통신 경로가 달라지고, 이것은 서비스 품질에도 영향을 미칩니다.  
장애 발생 시 피해 범위나 회복 시간도 달라지고, 보안성도 달라집니다."

## **2계층 네트워크**
호스트간 통신이 2계층만으로 이루어지는 디자인.  
- 통신할 호스트가 동일한 네트워크여야 한다. 
- 동일한 네트워크이므로 게이트웨이를 거치지 않고, 호스트가 직접 통신이 가능하다.  

 
&nbsp;
 


rem) 루프구조 주의, 
STP 사용-> 블록포인트 발생하여 전체 인프라 대역폭 사용을 못하게 됨
-> 해결 : MG-LAG를 사용하여 루프를 제거하고 논블로킹 구조 구현


 
&nbsp;
 
## **3계층 네트워크**
호스트 간 통신이 3계층 통신으로 이루어지는 디자인.  
라우팅으로 구성되었기 때문에 루프가 발생하지 않는다.  
*ECMP 라우팅 기술을 이용해 전체 대역폭을 모두 사용할 수있다. 

[*] *Equal-Cost Multi-Path*
 
&nbsp;
 

 
&nbsp;
 


## **3-Tier 아키텍처**
Core - Aggregation - Access 3계층
유서 깊은 네트워크 디자인.  

호스트가 직접 연결된 액세스 계층에 스위치가 있고  
그 상단에 액세스 스위치를 중간에서 접선하는 애그리게이션 스위치가 있다.  
다시 애그리게이션 스위치를 코어 계층 스위치가 모아서 통신할 수 있게 연결해준다.  

 
&nbsp;


## **2-Tier 아키텍처**
### **스파인-리프 구조** *Spine-Leaf*
하단 호스트가 연결되는 리프 스위치가  
상단 스파인 스위치와 연결된다.  
리프-스파인 스위치 간에는 2계층 스패닝 트리가 동작하지 않고,  
모든 링크를 사용해 트래픽을 전송한다.  

 
&nbsp;

- **L2 패브릭**  
스파인-리프 사이를 2계층 네트워크로 구성함.  
TRILL, SPB와 같은 프로토콜을 사용하여 루프에 대한 제약을 해결할 수 있다.  

- **L3 패브릭**  
스파인-리프 사이를 3계층 네트워크로 구성함.  
라우팅으로 구성되어 있으므로 
- 별도 기술 없이 루프를 제거할 수 있고 
- ECMP를 이용해 모든 링크를 사용할 수있다. 
 
&nbsp;
 


- North-South 트래픽 : 사용자-서버간 요청-응답 트래픽
- East-West 트래픽 : 서버 간 통신
 
&nbsp;
 
&nbsp;
 
### **데이터 센터의 트래픽은 왜 변했나?**
North-South에서 East-West로.  

- 서버 가상화
서버 호스트 하나에 가상 머신 다수가 운영된다.  


- 빅데이터 대중화
빅데이터 기술은 기본적으로 분산 처리를 하므로,  
컨트롤 노드 / 데이터 저장 노드로 분리되어 있어  
서버 간 통신이 많다.  

특히 하둡 *Hadoop*.

- 애플리케이션 아키텍처와 개발 방법의 변화
MSA와 같은 애플리케이션 아키텍처의 변화 방향  


 
&nbsp;
 
 
&nbsp;
 
## **데이터 센터용 망**
### **인터넷망**
외부 인터넷에서 사용자가 데이터센터에 접근할 수 있도록 구성된 영역.  
ISP(통신사)한테 회선을 받아 연동되어 있다.  


### **공인망 DMZ**
외부 사용자에게 직접 노출되는 웹 서비스의 서버가 모인 망.  
데이터센터 외부 접근을 위하 공인 IP가 사용된다.  
서비스를 외부로 제공하므로 서비스망이라고도 한다.  


### **내부망(사내망/사설망)**
센터 내부 혹은 사내에서만 접근 가능한 네트워크.  
일반적으로 사설 대역의 IP로 구성한다.  

외부망과 통신하려면 NAT가 공인 IP로 변환해줘야 한다. 

### **데이터베이스망**
개인정보 보안을 강화하기 위해 내부망에 별도로 두는 망.

### **대외망**
회사 대 회사로 서비스 연동이 필요한 경우.  
서비스에 필요한 최소한의 접근만 허용하기 위해 이런 망을 따로 분리한다.

### **관리망(OoB *Out of Band*)**
장비 운용을 위한 CLI나 웹 접속을 위해 사용됨.  
서비스망에 문제가 생겨도 정상 작동해야 하므로  
서비스망과 분리한다.  

 
&nbsp;
 

## **케이블링과 네트워크**
랙 : 데이터 센터 내에서 서버, 스토리지 등 물리적 장비를 수납하는 보관함.  

### **ToR** *Top of Rack*
랙 상단에 개별적으로 설치되는 스위치 구성.  

[Pros] 
- 서버가 스위치와 동일한 랙/인접한 랙에 있기 때문에  
케이블링의 길이나 복잡성이 줄어든다.  

[Cons] 
- ToR 구성은 EoR 구성보다 스위치가 더 필요하므로 
네트워크에 대한 관리사항과 운영비용(냉각비 등)이 늘어난다.  
- 랙마다 사전에 스위치를 구성해야 하므로,  
미사용 포트가 늘어 포트 직접도가 떨어질 수 있다.

  
 &nbsp;
  
 


### **EoR** *End of **Row***
서버와 네트워크를 별도의 랙으로 분리한 구성.  

랙이 있는 행 끝에 네트워크 장비를 두고,  
각 랙에 있는 서버를 네트워크 장비가 있는 랙까지  
케이블로 연결한다.  

[Pros] 
- ToR보다 필요한 스위치 장비 수가 적고,  
관리할 장비 수가 적고 + 통과할 스위치 수가 적어 대기시간/지연이 적다.


[Cons] 
- 복잡도가 높아진다. 
- 케이블이 길어지므로 구축비용과 교체비용이 증가한다. 


 &nbsp;
  
 

### **MoR** *Middle of Row*
EoR에서 케이블 길이를 줄이기 위해  
네트워크 장비를 중간에 배치한 구성.  









