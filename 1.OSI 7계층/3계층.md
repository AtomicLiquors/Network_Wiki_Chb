[<<메인으로](https://github.com/AtomicLiquors/Network_Wiki_Chb)

&nbsp;  
&nbsp;  
# 3계층

### "주소 체계 존재" : 논리적 주소인 **IP 주소**
 
&nbsp;
 
## **IP주소**
*Internet Protocol*
- 사용자가 환경에 맞게 변경하여 사용 가능
- 네트워크 주소 / 호스트 주소로 두 부분으로 구분된다
- 10진수 체계, '.'으로 구분되는 4개의 옥텟(Octet, 8비트 단위)
```
xxx.xxx.x.x
```

24비트씩 절반으로 나뉘는 MAC주소와 달리,  
네트워크/호스트 주소는 경계점이 유동적이다. 후술
### **클래스풀 *Classful* : 클래스 기반의 IP 주소 체계**
확장성을 높이고 주소 낭비를 줄이기 위해 고안되었다.  
서브넷 마스크(네트워크 주소/호스트 주소의 구분자)가 필요하지 않으며,  
**맨 앞자리 숫자만 보고도 주소가 속한 클래스를 구분할 수 있다.** 

클래스 : 필요한 호스트 IP 개수에 따라 네트워크 크기를 다르게 할당할 수 있다.

- A 클래스 : 국가 단위. 가장 큰 주소
- B 클래스 : 군용.
- C 클래스 : 가장 큰 주소
- D 클래스 : 멀티캐스트
- E 클래스 : 예약 *Reserved for futures*

(용도는 생각나는 대로 적은 것도 있으니 정정 요망)

현재는 클래스 기반으로 네트워크를 분할하지 않는다.  
1비트 단위로 네트워크를 세밀하게 분할하는 방법을 사용한다. 

 
&nbsp;
 


### 사용 가능한 호스트 개수
클래스리스 네트워크에서 특히 매우 중요하다.  

한 옥텟이 2진수 8자리이므로   
클래스마다 다음과 같은 갯수의 IP를 표현할 수 있다. 
- A클래스는 $2^{24}-2$
- B클래스는 $2^{16}-2$
- C클래스는 $2^8-2$

2를 뺀 이유는 실제로 맨 앞의 숫자를 네트워크 주소로,   
맨 뒤의 숫자를 브로드캐스트 주소로 사용하기 때문이다. 


&nbsp;

### 클래스리스 네트워크
**현재 우리가 사용하는 주소 체계**  
클래스풀 체계가 기하급수적으로 불어나는 IP 주소 수요를 감당할 수 없었다.  
또한 주소를 할당받아놓고 제대로 사용하지 못하고 낭비하였다.  
(대표적으로 기업이 A 클래스에서 할당받은 예비용 주소들)  

서브넷 마스크로 네트워크 주소/호스트 주소를 구분해야 한다.

&nbsp;
 
 
&nbsp;
 




## **관련 프로토콜**

### **ARP** 
*Address Resolution Protocol*

상대의 IP 주소를 바탕으로,   
상대의 MAC 주소를 알아내는 프로토콜.

- GARP *Gratuitous ARP* :   
자신의 IP와 MAC 주소를 알리는 프로토콜.  
IP 충돌 감지, 상대의 ARP 테이블 갱신, 고가용성 용도의 클러스터링  
등등을 위해 필요하다. 

- RARP *Reverse ARP* :   
자신의 MAC 주소를 바탕으로,   
자신이 할당받아야 할 IP를 서버에게 문의하는 프로토콜.  
<br>
기능이 한정적이라 지금은 BOOTP, DHCP를 쓰며 RARP를 쓰지 않는다.

- 프록시 ARP : 라우터에 기본으로 활성화된, ARP를 대행해 주는 기능.  
게이트웨이 관련 참고. 



&nbsp;
 

명령 프롬프트에서 PC의 ARP 테이블 정보 확인하기.
```
arp -a 
```

&nbsp;


 
&nbsp;
## **관련 장비**
### 라우터 
- IP 주소를 사용하여, 정확한 전송을 위한 최적의 경로를 찾아주고, 해당 경로로 패킷을 전송한다.

- 먼 거리로 통신할 수 있는 프로토콜로 변환한다.  
- 브로드캐스트와 멀티캐스트를 컨트롤한다.  
- 주소가 불분명한 패킷은 폐기한다.


 
&nbsp;

### 게이트웨이

 


## 관련 개념
- 서브네팅 : 네트워크 입문 88페이지
- 공인 IP : 전 세계에서 유일해야 한다
- 사설 IP : 통신사나 IP할당기관(한국의 KISA 등)를 거쳐 할당받은 IP  
인터넷에 직접 접속하지 못하며 NAT장비에서 공인 IP로 변경해야 한다.  
**가정에서 사용하는 공유기가 NAT장비 역할을 수행한다.**
- 인터넷 표준 : 국제 인터넷 표준화기구(IETF)가 인증한 RFC(Request for Comments)와 그 집합   
- Bogon IP : IP주소 할당하는 최상위 기구인 IANA가 예약해놓고 할당하지 않는 주소

- WHOIS 조회 : KISA에서 제공. IP가 어떤 회선 사업자를 사용하는지 알 수 있다.
