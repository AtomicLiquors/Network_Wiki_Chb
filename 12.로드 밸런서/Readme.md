[<<메인으로](https://github.com/AtomicLiquors/Network_Wiki_Chb)

&nbsp;  
&nbsp;  
# 로드 밸런서

## 왜 필요한가?  

서비스 하나는 보통 두 대 이상의 서버로 구성됩니다.
서버를 한 대만 운용하면,  
서비스 규모가 커지면 서비스를 모두 수용할 수 없게 됩니다.  
또한 서버 한 대만 장애가 발생해도 모든 서비스가 중단됩니다.  

서버를 여러 대 운용할 경우 서로 IP 주소가 다르기 때문에,  
서비스를 요청할 때 어떤 IP를 가진 서버로 요청할지 결정해야 합니다.


&nbsp;  
### "L4 스위치"
부하분산을 위해 그룹을 만들 때는  
IP주소(3계층)뿐 아니라 서비스 포트(4계층)까지 지정하여 만든다.  
그래서 로드 밸런서를 'L4 스위치'라고도 한다.  
(7계층 정보까지 확인하는 경우 L7 스위치라고도 한다.)

&nbsp;  
- SLB *Server Load Balancing* :   
서버 부하를 분산하는 경우.

- FWLB *Firewall Load Balancing* :   
방화벽 부하를 분산하는 경우.

패킷이 방화벽 정책에 부합하여 방화벽을 통과하면,  
방화벽은 자신이 가진 세션 테이블에 패킷의 정보를 기록한다.  
응답 패킷은 방화벽 정책을 확인하는 게 아니라 세션 테이블에서 패킷을 먼저 조회한다.  
응답 패킷이 세션 테이블에 없다면, 요청한 적이 없는 패킷에 대한 응답으로 간주하고 폐기된다.

&nbsp;
### VIP
= 또는 서비스 IP 주소라고도 한다.  

로드 밸런서가 갖는 가상 IP.  
모든 요청들을 VIP로 받아들인 다음,  
각 서버의 IP로 전송한다.

&nbsp;


&nbsp;   
### 리얼 IP
실제 트래픽을 받을 개별 서버의 IP.

