[<<메인으로](https://github.com/AtomicLiquors/Network_Wiki_Chb)

&nbsp;  
&nbsp;  
# 로드 밸런서
서버 및 장비의 트래픽 부하를 분산하기 위해 사용하는 장비.  

 
&nbsp;
 



## 왜 필요한가?  

서비스 하나는 보통 두 대 이상의 서버로 구성됩니다.
서버를 한 대만 운용하면,  
서비스 규모가 커지면 서비스를 모두 수용할 수 없게 됩니다.  
또한 서버 한 대만 장애가 발생해도 모든 서비스가 중단됩니다.  

서버를 여러 대 운용할 경우 서로 IP 주소가 다르기 때문에,  
서비스를 요청할 때 어떤 IP를 가진 서버로 요청할지 결정해야 합니다.

&nbsp;



### "L4 스위치"
- 4계층 이상에서 동작하면서 로드 밸런서 기능이 있는 스위치.  

- 또는 로드 밸런서를 그냥 'L4 스위치'라고도 한다.  

    부하분산을 위해 그룹을 만들 때는  
    IP주소(3계층)뿐 아니라 서비스 포트(4계층)까지 지정하여 만들기 때문이다.

 
&nbsp;
 

### "L7 스위치"
로드 밸런서가 7계층 정보까지 확인하는 경우 L7 스위치라고도 한다.  
(HTTP, FTP, SMTP와 같은 애플리케이션 프로토콜 정보)  
다양한 부하분산, 정보수정, 정보 필터링  


**ADC** *Application Delivery Controller*  
- 상세한 동작을 위하여 프록시로 동작한다.  
- 부하가 큰 정적 콘탠츠 캐싱 기능  


 
&nbsp;
 

&nbsp;  

&nbsp;  
## **동작 방식**
- SLB *Server Load Balancing* :   
서버 부하를 분산하는 경우.

- FWLB *Firewall Load Balancing* :   
방화벽 부하를 분산하는 경우.

    패킷이 방화벽 정책에 부합하여 방화벽을 통과하면,  
    방화벽은 자신이 가진 세션 테이블에 패킷의 정보를 기록한다.  
    응답 패킷은 방화벽 정책을 확인하는 게 아니라 세션 테이블에서 패킷을 먼저 조회한다.  
    응답 패킷이 세션 테이블에 없다면, 요청한 적이 없는 패킷에 대한 응답으로 간주하고 폐기된다.

&nbsp;
- VPNLB *VPN Load Balancing*   
 
&nbsp;
 
&nbsp;  


## **관련 개념**

### **스케일 업** 
기존 시스템에 내부 컴포넌트 용량을 키우거나(CPU, 메모리, 디스크 등)  
용량이 더 큰 시스템을 새로 구매하고 서비스를 이전하는 방법
- [pros] 부품 추가만 된다면, 시스템 설계를 변경하지 않고도   
서비스 사용량을 쉽게 늘릴 수 있다.
- [cons] 부품 추가가 어렵다. 시스템이 커질수록 비용도 가파르게 늘어난다.

- 주로 기존 대형 유닉스 시스템에서 사용한다.

&nbsp;

### **스케일 아웃** 
서버 여러 대로 부하를 분산하는 방법.  
서비스 자체를 구분하거나,  
같은 서비스를 분산해 처리할 수 있다.

- [pros] 적은 비용, 결함허용*Fault Tolerance* 구현

- [cons] 아키텍처가 복잡하고 프로세스, 네트워크 장비가 추가로 필요할 수 있다.

 
&nbsp;
 



### VIP
= 또는 서비스 IP 주소라고도 한다.  

로드 밸런서가 갖는 가상 IP.  
모든 요청들을 VIP로 받아들인 다음,  
적절한 서버의 IP로 요청을 전송한다.

&nbsp;


&nbsp;   
### 리얼 IP
실제 트래픽을 받을 개별 서버의 IP.

 
&nbsp;
 
 
&nbsp;
 

